<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scottish Enterprise | Support Assessment</title>
    <style>
        :root { --se-blue: #005eb8; --reject: #d9534f; --warn: #f0ad4e; --pass: #28a745; --light: #f8f9fa; }
        body { font-family: 'Segoe UI', Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; background: #e9ecef; color: #333; }
        .container { max-width: 850px; margin: 0 auto; background: white; padding: 40px; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .hidden { display: none; }
        .logo-box { text-align: center; margin-bottom: 20px; font-weight: bold; color: var(--se-blue); font-size: 22px; border: 2px solid var(--se-blue); padding: 10px; display: inline-block; }
        h1 { color: var(--se-blue); border-bottom: 3px solid var(--se-blue); padding-bottom: 10px; }
        
        /* Form Styling */
        .q-block { margin-bottom: 15px; padding: 15px; border-bottom: 1px solid #ddd; }
        label { display: block; font-weight: bold; margin-bottom: 8px; }
        select, input, textarea { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; box-sizing: border-box; }
        button { background: var(--se-blue); color: white; border: none; padding: 15px 30px; border-radius: 5px; cursor: pointer; font-size: 18px; font-weight: bold; margin-top: 20px; }
        button:hover { background: #003d76; }

        /* Report Styling */
        .report-section { margin-bottom: 20px; padding: 20px; border-radius: 4px; border-left: 10px solid; }
        .crit { border-color: var(--reject); background: #fdf2f2; }
        .soft { border-color: var(--warn); background: #fffcf0; }
        .score-box { text-align: center; margin: 30px 0; padding: 30px; border: 4px solid var(--se-blue); border-radius: 12px; }
        .score-val { font-size: 64px; font-weight: bold; color: var(--se-blue); display: block; }

        /* Product List */
        .product-card { background: var(--light); border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 6px; display: flex; align-items: center; }
        .product-card input { width: 25px; height: 25px; margin-right: 15px; cursor: pointer; }
        .portal-title { font-size: 72px; text-align: center; color: var(--se-blue); margin-top: 80px; }
    </style>
</head>
<body>

<div class="container">
    <div id="stage1">
        <h1>Support Eligibility Assessment</h1>
        <div class="q-block"><label>1. Are you based in Scotland?</label><select id="q1"><option value="Yes">Yes</option><option value="No">No</option></select></div>
        <div class="q-block"><label>2. Do you or anyone in your Company/Group deal with Russian Companies?</label><select id="q2"><option value="No">No</option><option value="Yes">Yes</option></select></div>
        <div class="q-block"><label>3. Are you selling Weapons or Armaments?</label><select id="q3"><option value="No">No</option><option value="Yes">Yes</option></select></div>
        <div class="q-block"><label>4. Are you willing to work with Scottish Enterprise?</label><select id="q4"><option value="Yes">Yes</option><option value="No">No</option></select></div>
        <div class="q-block"><label>5. Are you trying to grow your Company or Maintain it as is?</label><select id="q5"><option value="Grow">Grow</option><option value="Maintain">Maintain</option></select></div>
        <div class="q-block"><label>6. Are you working in sub-prime lending?</label><select id="q6"><option value="No">No</option><option value="Yes">Yes</option></select></div>
        <div class="q-block"><label>7. Are you working in adult entertainment?</label><select id="q7"><option value="No">No</option><option value="Yes">Yes</option></select></div>
        <div class="q-block"><label>8. Are you working in gambling?</label><select id="q8"><option value="No">No</option><option value="Yes">Yes</option></select></div>
        <div class="q-block"><label>9. How many Employees do you have?</label><input type="number" id="q9" value="10"></div>
        <div class="q-block"><label>10. Are you meeting Net Zero Targets?</label><select id="q10"><option value="Yes">Yes</option><option value="No">No</option></select></div>
        <div class="q-block"><label>11. Are you compliant with Fair Work Practices?</label><select id="q11"><option value="Yes">Yes</option><option value="No">No</option></select></div>
        <div class="q-block"><label>12. Are you paying all employees at least the Real Living Wage?</label><select id="q12"><option value="Yes">Yes</option><option value="No">No</option></select></div>
        <button onclick="generateReport()">Generate Report</button>
    </div>

    <div id="stage2" class="hidden">
        <h1>Eligibility Report</h1>
        <div id="report-content"></div>
        <div class="score-box" id="score-box"></div>
        <div id="report-footer" style="text-align:center;"></div>
    </div>

    <div id="stage3" class="hidden">
        <h1>Filter Products & Support</h1>
        <div id="summary-lists"></div>
        
        <div class="q-block">
            <label>Describe your company (Turnover, Markets, Products, etc.):</label>
            <textarea id="company-desc" placeholder="Tell us about what you do..."></textarea>
        </div>
        <div class="q-block">
            <label>What support do you need (Money, Advice, Introductions, etc.):</label>
            <textarea id="support-desc" placeholder="How can we help? Include budget if known."></textarea>
            <button onclick="matchProducts()">Submit</button>
        </div>

        <div id="matched-area" class="hidden">
            <h3>Matched Products</h3>
            <div id="product-list">
                <div class="product-card"><input type="checkbox" class="p-check" value="Ai Adoption Feasibility"> Ai Adoption Feasibility</div>
                <div class="product-card"><input type="checkbox" class="p-check" value="Ai Adoption Transformation Fund"> Ai Adoption Transformation Fund</div>
                <div class="product-card"><input type="checkbox" class="p-check" value="Amazon Accelerator Programme"> Amazon Accelerator Programme</div>
                <div class="product-card"><input type="checkbox" class="p-check" value="Becoming Investor Ready"> Becoming Investor Ready</div>
                <div class="product-card"><input type="checkbox" class="p-check" value="Finance Options For Your Business"> Finance Options For Your Business</div>
            </div>
            <button onclick="goPortal()">Apply</button>
        </div>
    </div>

    <div id="stage4" class="hidden">
        <div style="text-align:center;"><div class="logo-box">SCOTTISH ENTERPRISE</div></div>
        <div class="portal-title">Application Portal</div>
        <div id="portal-summary" style="margin-top:50px; border-top: 1px solid #ccc; padding-top: 20px;"></div>
    </div>
</div>

<script>
    let finalScore = 100;
    let considerations = [];
    let confirmed = [];

    function generateReport() {
        const d = {
            q1: document.getElementById('q1').value, q2: document.getElementById('q2').value,
            q3: document.getElementById('q3').value, q4: document.getElementById('q4').value,
            q5: document.getElementById('q5').value, q6: document.getElementById('q6').value,
            q7: document.getElementById('q7').value, q8: document.getElementById('q8').value,
            q9: parseInt(document.getElementById('q9').value), q10: document.getElementById('q10').value,
            q11: document.getElementById('q11').value, q12: document.getElementById('q12').value
        };

        let html = "";
        let reasons0 = [];
        let reasons50 = [];
        considerations = [];
        confirmed = [];

        const partners = "<ul><li>Business Gateway</li><li>HIE</li><li>SOSE</li><li>Skills Development Scotland</li></ul>";

        // Hard/Ambition Logic (0%)
        if(d.q1 === 'No') { reasons0.push("Location (Outside Scotland)"); html += `<div class='report-section crit'><h3>Section 1: Based in Scotland</h3><p><b>We can’t support you yet: </b><br>Scottish Enterprise only deals with Companies that are based in Scotland. For support you should visit ‘Scottish Development International’.</p></div>`; } else confirmed.push("Based in Scotland");
        if(d.q2 === 'Yes') { reasons0.push("Russian Sanctions"); html += `<div class='report-section crit'><h3>Section 2: Russian Sanctions</h3><p><b>We can’t support you yet: </b><br>Scottish Enterprise cannot currently deal with companies that have dealings with Russian Companies.</p></div>`; } else confirmed.push("No Russian dealings");
        if(d.q3 === 'Yes') { reasons0.push("Military Trading"); html += `<div class='report-section crit'><h3>Section 3: Military Trading</h3><p><b>We can’t support you yet: </b><br>Scottish Enterprise cannot currently deal with companies that deal in munitions or weapons.</p></div>`; } else confirmed.push("No weapons sales");
        if(d.q4 === 'No') { reasons0.push("Unwillingness to work with SE"); html += `<div class='report-section crit'><h3>Section 4: Scottish Enterprise</h3><p><b>We can’t support you yet: </b><br>Partners that may help: ${partners}</p></div>`; } else confirmed.push("Willing to work with SE");
        if(d.q5 === 'Maintain') { reasons0.push("Growth Ambition (Maintaining)"); html += `<div class='report-section crit'><h3>Section 5: Ambition</h3><p><b> We can’t support you yet: </b><br>SE is targeted at companies ambitious to grow. Partners that may help: ${partners}</p></div>`; } else confirmed.push("Growing company");
        if(d.q6 === 'Yes') { reasons0.push("Sub-Prime Lending sector"); html += `<div class='report-section crit'><h3>Section 6: Sub Prime Lending</h3><p><b>We can’t support you yet:</b><br>We cannot deal with Sub Prime Lending businesses.</p></div>`; } else confirmed.push("Non sub-prime lending");
        if(d.q7 === 'Yes') { reasons0.push("Adult Entertainment sector"); html += `<div class='report-section crit'><h3>Section 7: Adult Entertainment</h3><p><b>We can’t support you yet: </b><br>We cannot deal with Adult Entertainment businesses.</p></div>`; } else confirmed.push("Non adult entertainment");
        if(d.q8 === 'Yes') { reasons0.push("Gambling sector"); html += `<div class='report-section crit'><h3>Section 8: Gambling</h3><p><b>We can’t support you yet: </b><br>We cannot deal with Gambling businesses.</p></div>`; } else confirmed.push("Non gambling business");

        // Soft Logic (50%)
        if(d.q9 < 10) { considerations.push("Small Company Size (<10)"); reasons50.push("Employee Count"); html += `<div class='report-section soft'><h3>Section 9: Employees</h3><p><b>We are less likely to support you because: </b><br>Typically we don't deal with companies less than 10 Employees.</p></div>`; } else confirmed.push("10+ employees");
        if(d.q10 === 'No') { considerations.push("Net Zero Status"); reasons50.push("Net Zero Compliance"); html += `<div class='report-section soft'><h3>Section 10: Net Zero</h3><p><b>We are less likely to support you because: </b><br>SE works with companies meeting Net Zero standards.</p></div>`; } else confirmed.push("Meeting Net Zero");
        if(d.q11 === 'No') { considerations.push("Fair Work Compliance"); reasons50.push("Fair Work Practices"); html += `<div class='report-section soft'><h3>Section 11: Fair Work</h3><p><b>We are less likely to support you because: </b><br>SE works with companies meeting Fair Work standards.</p></div>`; } else confirmed.push("Fair Work compliant");
        if(d.q12 === 'No') { considerations.push("Living Wage Compliance"); reasons50.push("Real Living Wage"); html += `<div class='report-section soft'><h3>Section 12: Real Living Wage</h3><p><b>We are less likely to support you because: </b><br>SE works with companies paying the Real Living Wage.</p></div>`; } else confirmed.push("Paying Living Wage");

        finalScore = (reasons0.length > 0) ? 0 : (reasons50.length > 0 ? 50 : 100);
        
        let scoreHtml = `<h2>Eligibility Score</h2><span class="score-val">${finalScore}%</span>`;
        if(finalScore === 100) scoreHtml += "<p>You have passed all the pre-qualification measures.</p>";
        else scoreHtml += `<p>Reasons for ${finalScore}%: <ul><li>${(finalScore === 0 ? reasons0.concat(reasons50) : reasons50).join("</li><li>")}</li></ul></p>`;

        document.getElementById('report-content').innerHTML = html;
        document.getElementById('score-box').innerHTML = scoreHtml;
        
        let footer = `<button onclick="location.reload()" style="background:#666">Back</button>`;
        if(finalScore >= 50) footer += `<button onclick="goStage3()" style="margin-left:10px;">Get Support</button>`;
        document.getElementById('report-footer').innerHTML = footer;

        showStage(2);
    }

    function goStage3() {
        let lists = `<h3>Assessment Summary</h3><div style="background:#f0f7ff; padding:15px; border-radius:5px;">
            <strong>Confirmed Qualifications:</strong><ul><li>${confirmed.join("</li><li>")}</li></ul>
            <strong>Considerations:</strong><ul><li>${considerations.length > 0 ? considerations.join("</li><li>") : "None"}</li></ul>
        </div>`;
        document.getElementById('summary-lists').innerHTML = lists;
        showStage(3);
    }

    function matchProducts() { document.getElementById('matched-area').classList.remove('hidden'); }

    function goPortal() {
        const selected = Array.from(document.querySelectorAll('.p-check:checked')).map(c => c.value);
        let portalHtml = `<h3>Applying for:</h3><ul>`;
        selected.forEach(p => portalHtml += `<li>${p}</li>`);
        portalHtml += `</ul>`;
        document.getElementById('portal-summary').innerHTML = portalHtml;
        showStage(4);
    }

    function showStage(n) {
        document.querySelectorAll('.container > div').forEach(div => div.classList.add('hidden'));
        document.getElementById('stage' + n).classList.remove('hidden');
        window.scrollTo(0,0);
    }
</script>

</body>
</html>
